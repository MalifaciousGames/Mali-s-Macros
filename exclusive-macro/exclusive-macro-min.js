/* Mali's <<exclusive>> macro for Sugarcube */

Macro.add(["exclusive","exc"],{tags:["onclick"],defaultMode:"delete",defaultSelector:'a, button, [onclick], [role="link"]',handler(){let e,t=this.self.defaultMode,s=this.self.defaultSelector;if("string"==typeof this.args[0]){const e=this.args[0].toLowerCase().trim();"disable"!==e&&"dis"!==e||(t="disable"),"empty"===e&&(t="empty")}"string"==typeof this.args[1]&&(s=this.args[1]),this.payload[1]&&(e=this.shadowHandler((()=>{$.wiki(this.payload[1].contents)})));const a=$("<span>",{class:"macro-exclusive","data-mode":t}).wiki(this.payload[0].contents).appendTo(this.output);a[0].addEventListener("click",(i=>{if(!i.target.closest(s))return;const l=a.find(s);setTimeout((()=>{switch(t){case"disable":l.ariaDisabled(!0);break;case"empty":a.empty();break;case"delete":l.remove();break}e&&e.call()}))}),{capture:!0})}});